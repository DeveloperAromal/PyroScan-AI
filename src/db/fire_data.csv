  
<!DOCTYPE html>
<!-- saved from url=(0027)https://earthdata.nasa.gov/ -->
<html lang="en" xmlns:fb="http://ogp.me/ns/fb#" class="">
    <head>  
        <!-- Google Tag Manager -->
            <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WNP7MLF');</script>
        <!-- End Google Tag Manager -->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">        
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#630202"/>
        <meta name='mobile-web-app-capable' content='yes'>
        <meta name='apple-mobile-web-app-capable' content='yes'>
        <meta name='application-name' content='NASA-FIRMS'>
        <meta name='apple-mobile-web-app-status-bar-style' content='#630202'>
        <meta name='apple-mobile-web-app-title' content='NASA Fire Info'>
        <link rel='icon' sizes='192x192' href='/images/touch/icon-192x192.png'>
        <link rel='apple-touch-icon' href='/images/touch/icon-192x192.png'>
        <meta name='msapplication-TileImage' content='/images/touch/icon-144x144.png'>
        <meta name='msapplication-TileColor' content='#630202'>
        <meta name='theme-color' content='#630202'>
        <meta property='og:title' content='NASA-FIRMS'>
        <meta property='og:type' content='website'>
        <meta property='og:image' content='/images/touch/icon-192x192.png'>
        <meta property='og:url' content='https://firms.modaps.eosdis.nasa.gov/map/'>
        <meta property='og:description' content='Fire Information for Resource Management System'>
        <meta name='twitter:card' content='summary'>
        <meta name='twitter:url' content='https://firms.modaps.eosdis.nasa.gov/map/'>
        <meta name='twitter:title' content='NASA-FIRMS'>
        <meta name='twitter:description' content='Fire Information for Resource Management System'>
        <meta name='twitter:image' content='/images/touch/icon-192x192.png'>
        <meta name='twitter:creator' content='@nasa'>
        
              <link rel="manifest" href="/content/manifest/firms.json">
        <meta name="description" content="Global fire map and data. NASA | LANCE | Fire Information for Resource Management System provides near real-time active fire data 
            from MODIS and VIIRS to meet the needs of firefighters, scientists and users interested in monitoring fires. 
            Fire data is available for download or can be viewed through a map interface. Users can subscribe to email alerts bases on their area of interest.">
        <meta name="keywords" content="fire, wildfire, fire map, map, archive fire data, fire email alerts, fire download, fire data download, California, USA, US, Canada, Indonesia, Australia, Asia, Africa, Amazon, Brazil, Europe, Siberia, Russia">
      
        <title>API - Country - NASA | LANCE | FIRMS</title>
        
        <link rel="shortcut icon" href="/images/favicon.ico" type="image/vnd.microsoft.icon">
        <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@200;400;600&display=swap" rel="stylesheet">
        
    </head>
    <style> html { background: #222; font-size:10px; } </style>
<link rel="stylesheet" href="/dist/firms_index.5fe780b1.css"><script type="module" src="/dist/firms_index.3a21f589.js"></script><script src="/dist/firms_index.30f1e6a8.js" nomodule defer></script><link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;700&display=swap" rel="stylesheet">
<body>
	<div class="content">
		<section class="mainSection">
			<div id="content" class="">
                <div class="pgHeader"><a href="/api">API </a> / country</div>
				<div id="content_main">
                    <div id='error' style=''>Error in processing: <span id='errorMsg'>Invalid format.<br/>Invalid MAP_KEY.<br/>Invalid source.<br/>Invalid country code. Expects 3 characters.<br/>Invalid day range. Expects [1..10].</span></div>                    <div class="segment-group" id="searchOptions">
                        <div class="segment">
                            <table>
                                <tr>
                                    <td>
                                        Country                                    </td>
                                    <td>
                                        <select id="country" onchange="updateCSVUrl();"><option value='AFG'>Afghanistan (AFG)</option>
<option value='ALA'>Aland Islands (ALA)</option>
<option value='ALB'>Albania (ALB)</option>
<option value='DZA'>Algeria (DZA)</option>
<option value='ASM'>American Samoa (ASM)</option>
<option value='AND'>Andorra (AND)</option>
<option value='AGO'>Angola (AGO)</option>
<option value='AIA'>Anguilla (AIA)</option>
<option value='ATA'>Antarctica (ATA)</option>
<option value='ATG'>Antigua and Barbuda (ATG)</option>
<option value='ARG'>Argentina (ARG)</option>
<option value='ARM'>Armenia (ARM)</option>
<option value='ABW'>Aruba (ABW)</option>
<option value='AUS'>Australia (AUS)</option>
<option value='AUT'>Austria (AUT)</option>
<option value='AZE'>Azerbaijan (AZE)</option>
<option value='BHS'>Bahamas (BHS)</option>
<option value='BHR'>Bahrain (BHR)</option>
<option value='BGD'>Bangladesh (BGD)</option>
<option value='BRB'>Barbados (BRB)</option>
<option value='BLR'>Belarus (BLR)</option>
<option value='BEL'>Belgium (BEL)</option>
<option value='BLZ'>Belize (BLZ)</option>
<option value='BEN'>Benin (BEN)</option>
<option value='BMU'>Bermuda (BMU)</option>
<option value='BTN'>Bhutan (BTN)</option>
<option value='BOL'>Bolivia (BOL)</option>
<option value='BIH'>Bosnia and Herzegovina (BIH)</option>
<option value='BWA'>Botswana (BWA)</option>
<option value='BRA'>Brazil (BRA)</option>
<option value='IOT'>British Indian Ocean Territory (IOT)</option>
<option value='VGB'>British Virgin Islands (VGB)</option>
<option value='BRN'>Brunei Darussalam (BRN)</option>
<option value='BGR'>Bulgaria (BGR)</option>
<option value='BFA'>Burkina Faso (BFA)</option>
<option value='BDI'>Burundi (BDI)</option>
<option value='KHM'>Cambodia (KHM)</option>
<option value='CMR'>Cameroon (CMR)</option>
<option value='CAN'>Canada (CAN)</option>
<option value='CPV'>Cape Verde (CPV)</option>
<option value='CYM'>Cayman Islands (CYM)</option>
<option value='CAF'>Central African Republic (CAF)</option>
<option value='TCD'>Chad (TCD)</option>
<option value='CHL'>Chile (CHL)</option>
<option value='CHN'>China (CHN)</option>
<option value='COL'>Colombia (COL)</option>
<option value='COM'>Comoros (COM)</option>
<option value='COK'>Cook Islands (COK)</option>
<option value='CRI'>Costa Rica (CRI)</option>
<option value='CIV'>Cote d'Ivoire (CIV)</option>
<option value='HRV'>Croatia (HRV)</option>
<option value='CUB'>Cuba (CUB)</option>
<option value='CUW'>Curacao (CUW)</option>
<option value='CYP'>Cyprus (CYP)</option>
<option value='CZE'>Czech Republic (CZE)</option>
<option value='COD'>Democratic Republic of the Congo (COD)</option>
<option value='PRK'>Dem. Rep. Korea (PRK)</option>
<option value='DNK'>Denmark (DNK)</option>
<option value='DJI'>Djibouti (DJI)</option>
<option value='DMA'>Dominica (DMA)</option>
<option value='DOM'>Dominican Republic (DOM)</option>
<option value='ECU'>Ecuador (ECU)</option>
<option value='EGY'>Egypt (EGY)</option>
<option value='SLV'>El Salvador (SLV)</option>
<option value='GNQ'>Equatorial Guinea (GNQ)</option>
<option value='ERI'>Eritrea (ERI)</option>
<option value='EST'>Estonia (EST)</option>
<option value='ETH'>Ethiopia (ETH)</option>
<option value='FRO'>Faeroe Islands (FRO)</option>
<option value='FLK'>Falkland Islands (FLK)</option>
<option value='FSM'>Federated States of Micronesia (FSM)</option>
<option value='FJI'>Fiji (FJI)</option>
<option value='FIN'>Finland (FIN)</option>
<option value='FRA'>France (FRA)</option>
<option value='GUF'>French Guiana (GUF)</option>
<option value='PYF'>French Polynesia (PYF)</option>
<option value='ATF'>French Southern and Antarctic Lands (ATF)</option>
<option value='GAB'>Gabon (GAB)</option>
<option value='GEO'>Georgia (GEO)</option>
<option value='DEU'>Germany (DEU)</option>
<option value='GHA'>Ghana (GHA)</option>
<option value='GIB'>Gibraltar (GIB)</option>
<option value='GRC'>Greece (GRC)</option>
<option value='GRL'>Greenland (GRL)</option>
<option value='GRD'>Grenada (GRD)</option>
<option value='GLP'>Guadeloupe (GLP)</option>
<option value='GUM'>Guam (GUM)</option>
<option value='GTM'>Guatemala (GTM)</option>
<option value='GGY'>Guernsey (GGY)</option>
<option value='GIN'>Guinea (GIN)</option>
<option value='GNB'>Guinea-Bissau (GNB)</option>
<option value='GUY'>Guyana (GUY)</option>
<option value='HTI'>Haiti (HTI)</option>
<option value='HMD'>Heard I. and McDonald Islands (HMD)</option>
<option value='HND'>Honduras (HND)</option>
<option value='HKG'>Hong Kong (HKG)</option>
<option value='HUN'>Hungary (HUN)</option>
<option value='ISL'>Iceland (ISL)</option>
<option value='IND'>India (IND)</option>
<option value='IDN'>Indonesia (IDN)</option>
<option value='IRN'>Iran (IRN)</option>
<option value='IRQ'>Iraq (IRQ)</option>
<option value='IRL'>Ireland (IRL)</option>
<option value='IMN'>Isle of Man (IMN)</option>
<option value='ISR'>Israel (ISR)</option>
<option value='ITA'>Italy (ITA)</option>
<option value='JAM'>Jamaica (JAM)</option>
<option value='JPN'>Japan (JPN)</option>
<option value='JEY'>Jersey (JEY)</option>
<option value='JOR'>Jordan (JOR)</option>
<option value='KAZ'>Kazakhstan (KAZ)</option>
<option value='KEN'>Kenya (KEN)</option>
<option value='KIR'>Kiribati (KIR)</option>
<option value='KOS'>Kosovo (KOS)</option>
<option value='KWT'>Kuwait (KWT)</option>
<option value='KGZ'>Kyrgyzstan (KGZ)</option>
<option value='LAO'>Lao PDR (LAO)</option>
<option value='LVA'>Latvia (LVA)</option>
<option value='LBN'>Lebanon (LBN)</option>
<option value='LSO'>Lesotho (LSO)</option>
<option value='LBR'>Liberia (LBR)</option>
<option value='LBY'>Libya (LBY)</option>
<option value='LIE'>Liechtenstein (LIE)</option>
<option value='LTU'>Lithuania (LTU)</option>
<option value='LUX'>Luxembourg (LUX)</option>
<option value='MAC'>Macao (MAC)</option>
<option value='MKD'>Macedonia, Former Yugoslav Republic of (MKD)</option>
<option value='MDG'>Madagascar (MDG)</option>
<option value='MWI'>Malawi (MWI)</option>
<option value='MYS'>Malaysia (MYS)</option>
<option value='MDV'>Maldives (MDV)</option>
<option value='MLI'>Mali (MLI)</option>
<option value='MLT'>Malta (MLT)</option>
<option value='MHL'>Marshall Islands (MHL)</option>
<option value='MTQ'>Martinique (MTQ)</option>
<option value='MRT'>Mauritania (MRT)</option>
<option value='MUS'>Mauritius (MUS)</option>
<option value='MYT'>Mayotte (MYT)</option>
<option value='MEX'>Mexico (MEX)</option>
<option value='MDA'>Moldova (MDA)</option>
<option value='MCO'>Monaco (MCO)</option>
<option value='MNG'>Mongolia (MNG)</option>
<option value='MNE'>Montenegro (MNE)</option>
<option value='MSR'>Montserrat (MSR)</option>
<option value='MAR'>Morocco (MAR)</option>
<option value='MOZ'>Mozambique (MOZ)</option>
<option value='MMR'>Myanmar (MMR)</option>
<option value='NAM'>Namibia (NAM)</option>
<option value='NRU'>Nauru (NRU)</option>
<option value='NPL'>Nepal (NPL)</option>
<option value='NLD'>Netherlands (NLD)</option>
<option value='NCL'>New Caledonia (NCL)</option>
<option value='NZL'>New Zealand (NZL)</option>
<option value='NIC'>Nicaragua (NIC)</option>
<option value='NER'>Niger (NER)</option>
<option value='NGA'>Nigeria (NGA)</option>
<option value='NIU'>Niue (NIU)</option>
<option value='NFK'>Norfolk Island (NFK)</option>
<option value='MNP'>Northern Mariana Islands (MNP)</option>
<option value='NOR'>Norway (NOR)</option>
<option value='OMN'>Oman (OMN)</option>
<option value='PAK'>Pakistan (PAK)</option>
<option value='PLW'>Palau (PLW)</option>
<option value='PSE'>Palestine (PSE)</option>
<option value='PAN'>Panama (PAN)</option>
<option value='PNG'>Papua New Guinea (PNG)</option>
<option value='PRY'>Paraguay (PRY)</option>
<option value='PER'>Peru (PER)</option>
<option value='PHL'>Philippines (PHL)</option>
<option value='PCN'>Pitcairn Islands (PCN)</option>
<option value='POL'>Poland (POL)</option>
<option value='PRT'>Portugal (PRT)</option>
<option value='PRI'>Puerto Rico (PRI)</option>
<option value='QAT'>Qatar (QAT)</option>
<option value='COG'>Republic of Congo (COG)</option>
<option value='KOR'>Republic of Korea (KOR)</option>
<option value='REU'>Reunion (REU)</option>
<option value='ROU'>Romania (ROU)</option>
<option value='RUS'>Russian Federation (RUS)</option>
<option value='RWA'>Rwanda (RWA)</option>
<option value='BLM'>Saint-Barthelemy (BLM)</option>
<option value='SHN'>Saint Helena (SHN)</option>
<option value='KNA'>Saint Kitts and Nevis (KNA)</option>
<option value='LCA'>Saint Lucia (LCA)</option>
<option value='MAF'>Saint-Martin (MAF)</option>
<option value='SPM'>Saint Pierre and Miquelon (SPM)</option>
<option value='VCT'>Saint Vincent and the Grenadines (VCT)</option>
<option value='WSM'>Samoa (WSM)</option>
<option value='SMR'>San Marino (SMR)</option>
<option value='STP'>Sao Tome and Principe (STP)</option>
<option value='SAU'>Saudi Arabia (SAU)</option>
<option value='SEN'>Senegal (SEN)</option>
<option value='SRB'>Serbia (SRB)</option>
<option value='SYC'>Seychelles (SYC)</option>
<option value='SLE'>Sierra Leone (SLE)</option>
<option value='SGP'>Singapore (SGP)</option>
<option value='SXM'>Sint Maarten (SXM)</option>
<option value='SVK'>Slovakia (SVK)</option>
<option value='SVN'>Slovenia (SVN)</option>
<option value='SLB'>Solomon Islands (SLB)</option>
<option value='SOM'>Somalia (SOM)</option>
<option value='ZAF'>South Africa (ZAF)</option>
<option value='SGS'>South Georgia and South Sandwich Islands (SGS)</option>
<option value='SSD'>South Sudan (SSD)</option>
<option value='ESP'>Spain (ESP)</option>
<option value='LKA'>Sri Lanka (LKA)</option>
<option value='SDN'>Sudan (SDN)</option>
<option value='SUR'>Suriname (SUR)</option>
<option value='SJM'>Svalbard and Jan Mayen (SJM)</option>
<option value='SWZ'>Swaziland (SWZ)</option>
<option value='SWE'>Sweden (SWE)</option>
<option value='CHE'>Switzerland (CHE)</option>
<option value='SYR'>Syria (SYR)</option>
<option value='TWN'>Taiwan (TWN)</option>
<option value='TJK'>Tajikistan (TJK)</option>
<option value='TZA'>Tanzania (TZA)</option>
<option value='THA'>Thailand (THA)</option>
<option value='GMB'>The Gambia (GMB)</option>
<option value='TLS'>Timor-Leste (TLS)</option>
<option value='TGO'>Togo (TGO)</option>
<option value='TON'>Tonga (TON)</option>
<option value='TTO'>Trinidad and Tobago (TTO)</option>
<option value='TUN'>Tunisia (TUN)</option>
<option value='TUR'>Turkey (TUR)</option>
<option value='TKM'>Turkmenistan (TKM)</option>
<option value='TCA'>Turks and Caicos Islands (TCA)</option>
<option value='TUV'>Tuvalu (TUV)</option>
<option value='UGA'>Uganda (UGA)</option>
<option value='UKR'>Ukraine (UKR)</option>
<option value='ARE'>United Arab Emirates (ARE)</option>
<option value='GBR'>United Kingdom (GBR)</option>
<option value='USA'>United States (USA)</option>
<option value='UMI'>United States Minor Outlying Islands (UMI)</option>
<option value='VIR'>United States Virgin Islands (VIR)</option>
<option value='URY'>Uruguay (URY)</option>
<option value='UZB'>Uzbekistan (UZB)</option>
<option value='VUT'>Vanuatu (VUT)</option>
<option value='VAT'>Vatican (VAT)</option>
<option value='VEN'>Venezuela (VEN)</option>
<option value='VNM'>Vietnam (VNM)</option>
<option value='WLF'>Wallis and Futuna Islands (WLF)</option>
<option value='YEM'>Yemen (YEM)</option>
<option value='ZMB'>Zambia (ZMB)</option>
<option value='ZWE'>Zimbabwe (ZWE)</option>
</select>                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Source
                                    </td>
                                    <td>
                                        <select id="source" onchange="updateCSVUrl();">
                                            <option value="LANDSAT_NRT">LANDSAT (NRT) [US/Canada only]</option>
                                            <option value="MODIS_NRT">MODIS (URT+NRT)</option>
                                            <option value="MODIS_SP">MODIS (SP)</option>
                                            <option value="VIIRS_NOAA20_NRT">VIIRS NOAA-20 (URT+NRT)</option>
                                            <option value="VIIRS_NOAA20_SP">VIIRS NOAA-20 (SP)</option>
                                            <option value="VIIRS_NOAA21_NRT">VIIRS NOAA-21 (URT+NRT)</option>
                                            <option value="VIIRS_SNPP_NRT">VIIRS S-NPP (URT+NRT)</option>
                                            <option value="VIIRS_SNPP_SP">VIIRS S-NPP (SP)</option>
                                        </select>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="segment">
                            <table>
                                <tr>
                                    <td>
                                        Date
                                    </td>
                                    <td>
                                        <input id="date" type="text" placeHolder="YYYY-MM-DD or empty"  onkeyup="updateCSVUrl();" onchange="updateCSVUrl();" value="2025-08-02"> 
                                        <br/>* empty if getting most recent data
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Day Range
                                    </td>
                                    <td>
                                        <select id="range" onchange="updateCSVUrl();">
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                            <option value="6">6</option>
                                            <option value="7">7</option>
                                            <option value="8">8</option>
                                            <option value="9">9</option>
                                            <option value="10">10</option>
                                        </select>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="segment">
                            <table>
                                <tr>
                                    <td>
                                        Map Key
                                    </td>
                                    <td>
                                        <input type="text" id="mapkey2" maxlength="32" placeHolder="MAP KEY" value="" onkeyup="updateCSVUrl();" onchange="updateCSVUrl();">
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="segment segment-bottom">
                            <div id="search_btn" onclick="search();">Display Results</div>
                        </div>
                        <div class="segment segment-csv">
                            <span>Click or copy link generated below for your download script.</span><br/><br/>
                            <span id="csvUrl"></span>
                            <span id="transactionAmount"></span>
                        </div>
                    </div>
                                            <div class="segment-group" id="searching">
                        <div class="segment segment-bottom"> ... searching ...</div>
                    </div>
                </div>
                <div class="api_item_link">
                                        <ul>
                        <li>/api/country/csv/[MAP_KEY]/[SOURCE]/[COUNTRY_CODE]/[DAY_RANGE]</li>
                    </ul>
                    <div>- Get most recent data, from TODAY to TODAY - (DAY_RANGE-1)</div>
                    <ul>
                        <li>/api/country/csv/[MAP_KEY]/[SOURCE]/[COUNTRY_CODE]/[DAY_RANGE]/[DATE]</li>
                    </ul>
                    <div>- Returns data for [DATE] .. [DATE + DAY_RANGE-1]</div>
                </div>
                <br/>
                <br/>
                <div class="api_item_link">
                    <div>
                        <a target="_blank" class="ext" href="https://www.earthdata.nasa.gov/data/tools/firms/faq">Attribute table for LANDSAT</a><br/>
                        <a target="_blank" class="ext" href="https://go.nasa.gov/3JSgbdb">Attribute table for MODIS</a><br/>
                        <a target="_blank" class="ext" href="https://go.nasa.gov/3sf3ALb">Attribute table for VIIRS S-NPP</a><br/>
                        <a target="_blank" class="ext" href="https://www.earthdata.nasa.gov/learn/find-data/near-real-time/firms/vj114imgtdlnrt">Attribute table for VIIRS NOAA-20</a><br/>
                        <a target="_blank" class="ext" href="https://www.earthdata.nasa.gov/learn/find-data/near-real-time/firms/vj214imgtdlnrt">Attribute table for VIIRS NOAA-21</a><br/>
                    </div>
                </div>
                <br/>
                <br/>
                <div class="api_item" style="border-top:.1rem solid #AAA;">
                    <b>SOURCE:</b>
                    <ul>
                        <li>LANDSAT_NRT <span class="api_item_desc">[US/Canada only] (LANDSAT Near Real-Time, Real-Time and Ultra Real-Time *)</span></li>
                        <li>MODIS_NRT <span class="api_item_desc">(MODIS Near Real-Time, Real-Time and Ultra Real-Time *)</span></li>
                        <li>MODIS_SP <span class="api_item_desc">(MODIS Standard Processing)</span></li>
                        <li>VIIRS_NOAA20_NRT <span class="api_item_desc">(VIIRS NOAA-20 Near Real-Time, Real-Time and Ultra Real-Time *)</span></li>
                        <li>VIIRS_NOAA20_SP <span class="api_item_desc">(VIIRS NOAA-20 Standard Processing)</span></li>
                        <li>VIIRS_NOAA21_NRT <span class="api_item_desc">(VIIRS NOAA-21 Near Real-Time, Real-Time and Ultra Real-Time *)</span></li>
                        <li>VIIRS_SNPP_NRT <span class="api_item_desc">(VIIRS Suomi-NPP Near Real-Time, Real-Time and Ultra Real-Time *)</span></li>
                        <li>VIIRS_SNPP_SP <span class="api_item_desc">(VIIRS Suomi-NPP Standard Processing)</span></li>
                    </ul>
                    <div>
                            * RT and URT data are removed when corresponding NRT detections are processed or RT/URT is older than 6 hours.
                            <br/>
							<br/>
							NASA EOSDIS defines Real-Time as data that is made available within 60 minutes of satellite overpass. 
							URT is much quicker than that. FIRMS makes URT data available in less than 60 seconds of satellite fly over for much of the US and Canada<br/>
							<a target="_blank" class="ext" href="https://wiki.earthdata.nasa.gov/display/FIRMS/2022/07/14/Wildfire+detection+in+the+US+and+Canada+within+a+minute+of+satellite+observation">Learn more about Ultra Real-Time data.</a><br/>
                            <br/>
                    </div>
                </div>
                <div class="api_item">
                                                <b>COUNTRY_CODE:</b>
                            <ul>
                                <li>3 - letter country code</li>
                            </ul>
                            <div>
                                <a href="/api/countries/" target="_blank">/api/countries/</a> <span class="api_item_desc">- list of supported country codes</span>
                            </div>
                                                <br/>
                </div>
                <div class="api_item">
                    <b>DAY_RANGE:</b>
                    <ul>
                        <li>1 .. 10 <span class="api_item_desc">- number of days to query at one time</span></li>
                    </ul>
                </div>
                <div class="api_item">
                    <b>DATE:</b>
                    <ul>
                        <li>YYYY-MM-DD <span class="api_item_desc">- [Optional] If not provided it will return the most recent data</span></li>
                        <li><a href="/api/data_availability/">/api/data_availability/</a> <span class="api_item_desc">- check for product date availability</span></li>
                    </ul>
                </div>
                <div class="api_item">
                    <div id="firms-mapkey" class="service">Map Key</div>
                    <div class="examples border-bottom" style="border-bottom:.1rem solid #999;">
    <div id="mapKey">
        To use FIRMS web services, request <b>free</b> MAP_KEY
        <div class="mapKeyBtn" onclick="openMapKeyMenu();">Get MAP_KEY</div>
    </div>
    <br/>
    <div class="transaction">
        To check number of available map transactions</br>
        <input type="input" placeHolder="Your Map Key" id="mapkey"> 
        <div class="status" onclick="checkTransaction();">Check status</div>
        <div id="error_msg"></div>
    </div>
    <script>
        function checkTransaction() {
            let el = document.getElementById('mapkey');
            let el2 = document.getElementById('error_msg');
            if (el && el.value != '') {
                el2.style.display="none";
                if (! el.value.match(/^[0-9a-z]+$/) || el.value.length != 32) {
                    el2.innerHTML = "Map Key value is invalid.";
                    el2.style.display="block";
                } else {
                    window.location.href = '/mapserver/mapkey_status/?MAP_KEY=' + el.value;
                }
            } else {
                el2.innerHTML = 'Map Key value missing.';
                el2.style.display="block";
            }
        }
    </script>
</div>                </div>
            </div>
		</section>
	</div>
    <div id="modal_mapkey" class="modal">

	<div style="position:fixed;top:0;left:0;right:0;bottom:0" onclick="modal_mmk.closeMenu();">
	</div>
  <!-- Modal content -->
  <div class="modal-content">
    <div class="modal-body" style="top:0px; padding:0 20px;">
    	<span class="modal-close" onclick="modal_mmk.closeMenu();"><i class="fa fa-times" aria-hidden="true"></i></span>
    
    	<div id="pageMain">
    		<h1>Request FIRMS Map Key</h1>
    		<div>
				<p>
    				Due to heavy server resource demand when generating data, MAP_KEY is needed in order to process your request.
        		</p>
        		<p>
					MAP_KEY limit is <b>5000 transactions / 10-minute interval</b>.<br/>
					Larger transactions may count as multiple requests (ex. requesting 7 days).<br/>
					Contact us if you need limit increase.
        		</p>
        		<div style="text-align: center;margin-top:3rem;">
        			<input type="text" id="teVal" placeHolder="email address" style="width:33rem;"><br><br>
	        		<div id="error_msg" class="mkErr"></div><br>
        			<div class="mkBtn" onclick="modal_mmk.getKey();">Get MAP Key</div>
        		</div>
			</div>
    	</div>  	
    	
		<div id="pageConfirmation">
    		<h1>FIRMS WMS Map Key</h1>
    		<div>
        		<p id="pageConfirmationText" style="font-weight:600;margin-top:4.5rem;">        			
        		</p>
        		<div style="text-align: center;margin-top:20rem;">
        			<div class="mkBtn" onclick="modal_mmk.closeMenu();">Close</div>
        		</div>
			</div>
    	</div>  	
  	
	<div id="pageOptions">
    		<h1>FIRMS WMS Map Key</h1>
    		<div style="line-height:3rem;">
				<p>
    				Email is already registered.
        		</p>
        		<p>
        			<b>Please select option:</b>
        			<ul style="list-style-type:none;margin-left:8rem;">
        				<li><input type="radio" name="optAct" value="GET" checked>Email current Map Key</li>
<!--        				<li><input type="radio" name="optAct" value="PUT">Generate new Map Key</li>
        				<li><input type="radio" name="optAct" value="DELETE">Remove Map Key</li>-->
        			</ul>        			
        		</p>
        		<br>
        		<div style="text-align: center;margin-top:3rem;">
        			<div class="mkBtn" onclick="modal_mmk.updateKey();">Proceed</div>
        		</div>
			</div>
    	</div>  	
  	
  	</div>

  </div>
</div>

<script>
var modal_mmk = {

		pages : ['pageMain', 'pageConfirmation', 'pageOptions'],		

        init : function () {
            modal_mmk.setContent('pageMain', '');            
        },
        
        closeMenu : function () {
			modal_mmk.setContent('pageMain', '');
			utils.hide('modal_mapkey');
            document.querySelector('body').style.overflow = "auto";
        },


        openMenu : function () {
			utils.show('modal_mapkey');
			document.querySelector('body').style.overflow = "hidden";
			document.getElementById('teVal').focus();
        },

        getKey : function () {
			var email = document.getElementById('teVal').value;
        	if (utils.checkEmail(email)) {
        		modal_mmk.setError(false);
        		modal_mmk.requestMapKey(email, "POST");
        		
        	} else {
            	modal_mmk.setError(true, "Invalid email address");
        	} 
        },

        updateKey : function () {
            var email = document.getElementById('teVal').value;
        	if (utils.checkEmail(email)) {
        		var action = document.querySelector('input[name="optAct"]:checked').value;
        		modal_mmk.requestMapKey(email, action);
        	} else {
            	modal_mmk.closeMenu();
        	}
        	
        },

        setError : function (display, msg) {
            var el = document.getElementById('error_msg'); 
            el.style.display='none';

            if (msg != "") {
                if (display) {
                    el.innerHTML = msg;
                    el.style.display='block';
                }
            }
        },

        requestMapKey : function (email, action) {

			var site = (window.location.pathname.indexOf('/usfs/')>=0) ? 'fs' : 'firms';
			var data = { 	"email"        	: email,
							"site"		 	: site,
							"action"		: action };
			fetch('/api/map_key_setup/', {
            	method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify(data),
			})
			.then((response) => response.text())
			.then((data) => {
				if (data.indexOf('error-') >= 0) {
					modal_mmk.setContent("pageConfirmation", data.replace('error-', ''));
				} else {
					if (data == 'options') {
						modal_mmk.setContent("pageOptions", '');
					} else {             
						modal_mmk.setContent("pageConfirmation", data);
					}
				}
			})
			.catch((error) => {
				console.error(error);
			});
        },

        setContent : function (cont, text) {
            for (var i=0; i<modal_mmk.pages.length; i++) {
                if (modal_mmk.pages[i] == cont) {
                    utils.show(modal_mmk.pages[i]);
                    if (text != '' && document.getElementById(modal_mmk.pages[i] + 'Text')) {
                        document.getElementById(modal_mmk.pages[i] + 'Text').innerHTML = text;
                    }
                } else {
                    utils.hide(modal_mmk.pages[i]);
                }
            }
        }
}

</script>
</body>
<script>
let apiName = 'country';let country = '';let weight = {
            "ABW" : 1,
            "AFG" : 8,
            "AGO" : 12,
            "AIA" : 1,
            "ALA" : 1,
            "ALB" : 3,
            "AND" : 1,
            "ARE" : 3,
            "ARG" : 12,
            "ARM" : 3,
            "ASM" : 1,
            "ATA" : 12,
            "ATF" : 1,
            "ATG" : 1,
            "AUS" : 9,
            "AUT" : 8,
            "AZE" : 3,
            "BDI" : 3,
            "BEL" : 3,
            "BEN" : 3,
            "BFA" : 8,
            "BGD" : 8,
            "BGR" : 6,
            "BHR" : 1,
            "BHS" : 4,
            "BIH" : 3,
            "BLM" : 1,
            "BLR" : 8,
            "BLZ" : 3,
            "BMU" : 1,
            "BOL" : 8,
            "BRA" : 12,
            "BRB" : 1,
            "BRN" : 1,
            "BTN" : 3,
            "BWA" : 6,
            "CAF" : 8,
            "CAN" : 16,
            "CHE" : 3,
            "CHL" : 8,
            "CHN" : 12,
            "CIV" : 8,
            "CMR" : 8,
            "COD" : 12,
            "COG" : 8,
            "COK" : 1,
            "COL" : 8,
            "COM" : 1,
            "CPV" : 1,
            "CRI" : 3,
            "CUB" : 4,
            "CUW" : 1,
            "CYM" : 1,
            "CYP" : 1,
            "CZE" : 3,
            "DEU" : 8,
            "DJI" : 3,
            "DMA" : 1,
            "DNK" : 4,
            "DOM" : 3,
            "DZA" : 12,
            "ECU" : 8,
            "EGY" : 8,
            "ERI" : 8,
            "ESP" : 8,
            "EST" : 4,
            "ETH" : 8,
            "FIN" : 6,
            "FJI" : 4,
            "FLK" : 4,
            "FRA" : 8,
            "FRO" : 1,
            "FSM" : 1,
            "GAB" : 8,
            "GBR" : 6,
            "GEO" : 3,
            "GGY" : 1,
            "GHA" : 6,
            "GIB" : 1,
            "GIN" : 8,
            "GLP" : 1,
            "GMB" : 1,
            "GNB" : 4,
            "GNQ" : 3,
            "GRC" : 6,
            "GRD" : 1,
            "GRL" : 6,
            "GTM" : 3,
            "GUF" : 3,
            "GUM" : 1,
            "GUY" : 8,
            "HKG" : 1,
            "HMD" : 1,
            "HND" : 4,
            "HRV" : 4,
            "HTI" : 3,
            "HUN" : 6,
            "IDN" : 12,
            "IMN" : 1,
            "IND" : 12,
            "IOT" : 1,
            "IRL" : 4,
            "IRN" : 12,
            "IRQ" : 6,
            "ISL" : 4,
            "ISR" : 3,
            "ITA" : 8,
            "JAM" : 1,
            "JEY" : 1,
            "JOR" : 3,
            "JPN" : 6,
            "KAZ" : 12,
            "KEN" : 6,
            "KGZ" : 8,
            "KHM" : 8,
            "KIR" : 1,
            "KNA" : 1,
            "KOR" : 4,
            "KOS" : 3,
            "KWT" : 3,
            "LAO" : 8,
            "LBN" : 1,
            "LBR" : 3,
            "LBY" : 9,
            "LCA" : 1,
            "LIE" : 1,
            "LKA" : 3,
            "LSO" : 3,
            "LTU" : 3,
            "LUX" : 1,
            "LVA" : 3,
            "MAC" : 1,
            "MAF" : 1,
            "MAR" : 8,
            "MCO" : 1,
            "MDA" : 3,
            "MDG" : 8,
            "MDV" : 1,
            "MEX" : 12,
            "MHL" : 1,
            "MKD" : 3,
            "MLI" : 12,
            "MLT" : 1,
            "MMR" : 8,
            "MNE" : 3,
            "MNG" : 12,
            "MNP" : 1,
            "MOZ" : 8,
            "MRT" : 8,
            "MSR" : 1,
            "MTQ" : 1,
            "MUS" : 1,
            "MWI" : 3,
            "MYS" : 8,
            "MYT" : 1,
            "NAM" : 8,
            "NCL" : 3,
            "NER" : 12,
            "NFK" : 1,
            "NGA" : 8,
            "NIC" : 6,
            "NIU" : 1,
            "NLD" : 3,
            "NOR" : 6,
            "NPL" : 8,
            "NRU" : 1,
            "NZL" : 6,
            "OMN" : 8,
            "PAK" : 8,
            "PAN" : 4,
            "PCN" : 1,
            "PER" : 12,
            "PHL" : 6,
            "PLW" : 1,
            "PNG" : 6,
            "POL" : 8,
            "PRI" : 1,
            "PRK" : 8,
            "PRT" : 4,
            "PRY" : 8,
            "PSE" : 1,
            "PYF" : 1,
            "QAT" : 1,
            "REU" : 1,
            "ROU" : 8,
            "RUS" : 16,
            "RWA" : 3,
            "SAU" : 12,
            "SDN" : 12,
            "SEN" : 8,
            "SGP" : 1,
            "SGS" : 1,
            "SHN" : 1,
            "SJM" : 4,
            "SLB" : 4,
            "SLE" : 3,
            "SLV" : 3,
            "SMR" : 1,
            "SOM" : 6,
            "SPM" : 1,
            "SRB" : 3,
            "SSD" : 8,
            "STP" : 1,
            "SUR" : 6,
            "SVK" : 3,
            "SVN" : 3,
            "SWE" : 6,
            "SWZ" : 2,
            "SXM" : 1,
            "SYC" : 1,
            "SYR" : 6,
            "TCA" : 1,
            "TCD" : 12,
            "TGO" : 3,
            "THA" : 8,
            "TJK" : 8,
            "TKM" : 8,
            "TLS" : 3,
            "TON" : 1,
            "TTO" : 1,
            "TUN" : 6,
            "TUR" : 8,
            "TUV" : 1,
            "TWN" : 3,
            "TZA" : 8,
            "UGA" : 6,
            "UKR" : 8,
            "UMI" : 1,
            "URY" : 6,
            "USA" : 16,
            "UZB" : 8,
            "VAT" : 1,
            "VCT" : 1,
            "VEN" : 8,
            "VGB" : 1,
            "VIR" : 1,
            "VNM" : 8,
            "VUT" : 4,
            "WLF" : 1,
            "WSM" : 1,
            "YEM" : 8,
            "ZAF" : 12,
            "ZMB" : 8,
            "ZWE" : 6
        };    let range = '';
    let source = '';

    function setValues() {
        if (range == '') { range = '1';}
        if (source == '') {source = 'VIIRS_SNPP_NRT'; }
        if (apiName == 'country') {
            if (country == '') { country= 'USA';}
            utils.setSelectValue('country', country);
        }
        utils.setSelectValue('range', range);
        utils.setSelectValue('source', source.toUpperCase());
    }
    function generateUrl(obj, type) {
        let geo = 'world';
        if (apiName == 'country') {
            geo = obj.country;
        } else if (apiName == 'area' || apiName == 'area_static_fires') {
            if (obj.areaParams && obj.areaParams.isValid) {
                geo = obj.area;
            }
        }
        return '/api/country/'+type+'/' + obj.mapkey + '/' + obj.source + '/' + geo + '/' + obj.range;       
    }
    function updateCSVUrl() {
        let obj = getParams();
        //console.log(obj);
        let mapkey = (obj.isMapkeyValid) ? obj.mapkey : '[MAP_KEY]';
        let url = generateUrl(obj, 'csv');
        if (obj.date && obj.date != '0' && obj.isDateValid) {
            url += '/' + obj.date;
        }
        let csvlink = document.getElementById('csvUrl');
        if (obj.isMapkeyValid) {
            csvlink.innerHTML = '<a href="' + url + '" target="_blank">' + url + '</a>';
        } else {
            csvlink.innerHTML = url;
        }
        document.getElementById('transactionAmount').innerHTML = '<br/>Mapkey transaction amount: ' + computeWeight(obj);
    }
    function computeWeight(obj) {
        let src = (obj.source.indexOf('VIIRS') >= 0 ) ? 2 : 0.5;
        if (apiName == 'country') {
            return Math.ceil(weight[obj.country] * src * obj.range);
        } else if (apiName == 'area' || apiName == 'area_static_fires') {
            if (obj.areaParams && obj.areaParams.isValid) {
                let p = obj.areaParams;
                let x = Math.ceil((p.east - p.west) / 60.0);
                let y = Math.ceil((p.north - p.south) / 60.0);
                return Math.ceil(x * y * src * obj.range)
            }
            return 0;
        }
        return Math.ceil(src * obj.range);
    }
    function getAreaValues(area) {
        let obj = {};
        obj.west = -180;
        obj.east = 180;
        obj.north = 90;
        obj.south = -90;
        obj.isValid = true;
        if (area.toLowerCase() == 'world') { return obj; }
        let arr = area.split(',');
        if (arr.length != 4) { obj.isValid = false; return obj; }
        for (let i=0; i<4; i++) {
            let val = Number(arr[i]);
            if ((i==0 || i == 2) && (val < -180 || val > 180)) { obj.isValid = false; return obj;}
            if ((i==1 || i == 3) && (val < -90 || val > 90)) { obj.isValid = false; return obj;}
        }
        obj.west = Number(arr[0]);
        obj.south = Number(arr[1]);
        obj.east = Number(arr[2]);
        obj.north = Number(arr[3]);
        return obj;
    }
    function getParams() {
        let obj = {};
        obj.range = utils.getSelectValue('range');
        obj.source = utils.getSelectValue('source');
        if (apiName == 'country') {
            obj.country = utils.getSelectValue('country');
        } else if (apiName == 'area' || apiName == 'area_static_fires') {
            obj.area = document.getElementById('area').value;
            obj.areaParams = getAreaValues(obj.area);
        }
        obj.mapkey = document.getElementById('mapkey2').value;
        obj.date = document.getElementById('date').value;
        obj.isDateValid = true;
        obj.isMapkeyValid = true;
        if (obj.date && obj.date != '0') {
            let arr = obj.date.split('-');
            if (arr[0]<2000 || arr[1]>2100 || arr[1] < 0 || arr[1] > 12 || arr[2] < 0 || arr[2] > 31) {
                obj.isDateValid  = false;
            }
        }
        let exp = /^([0-9]|[a-z])+([0-9a-z]+)$/i;
        if(!obj.mapkey.match(exp) || obj.mapkey.length != 32) {
            obj.isMapkeyValid = false;
            obj.mapkey = '';
        }
        return obj;
    }
    function search () {
        utils.hide('error');
        let obj = getParams();
        
        if (! obj.isMapkeyValid) {
            document.getElementById('errorMsg').innerHTML = 'Invalid mapkey value.';
            utils.show('error');
            return;
        }
        if (! obj.isDateValid) {
            document.getElementById('errorMsg').innerHTML = 'Invalid date value.';
            utils.show('error');
            return;
        }

        let url = generateUrl(obj, 'html');
        if (obj.date && obj.date != '0') {
            url += '/' + obj.date;
        }
        utils.hide('searchOptions');
        utils.hide('results');
        utils.show('searching');
        window.location = url;

    }

    function pageLoaded() {
        setValues();
        updateCSVUrl();
        modal_mmk.init();
    }

    // MAPKEY
    function openMapKeyMenu() {
		modal_mmk.openMenu();
	}
	
</script>
